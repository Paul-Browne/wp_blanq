/*! imageCover | fullScreen | typeScale | middlize | resImg | colymn | Paul Browne | GNU License | 2015 */
!function(){function a(a,b){var c=[window.innerWidth];return window.addEventListener("resize",function(){var d=window.innerWidth,e=c.length;c.push(d),c[e]!==c[e-1]&&(clearTimeout(b),b=setTimeout(a,200))}),a}helperize=function(){var a=window.innerWidth,b=document.getElementsByTagName("body")[0].style,c=document.querySelectorAll(".fullscreen,.fullheight"),d=document.querySelectorAll(".middlize,.vmid"),e=document.querySelectorAll(".icovr");b.fontSize=a/600+15+"px",b.lineHeight=a/8e3+1.4;for(var f=0;f<c.length;f++)c[f].style.minHeight=window.innerHeight+"px";for(var g=0;g<d.length;g++)d[g].style.top=(d[g].parentNode.offsetHeight-d[g].offsetHeight)/2+"px",d[g].parentNode.style.position="relative";for(var h=0;h<e.length;h++){if(!document.querySelectorAll(".icovr-cont").length){var i=document.createElement("div");i.className="icovr-cont",e[h].parentNode.insertBefore(i,e[h]).appendChild(e[h])}var j=e[h].parentNode.offsetWidth,k=e[h].parentNode.offsetHeight,l=j/k,m=e[h].naturalWidth,n=e[h].naturalHeight,o=m/n,p=e[h].style;l>=o&&(p.width="100%",p.height="auto",p.top=(k-n/(m/j))/2+"px",p.left=0),o>l&&(p.width="auto",p.height="100%",p.top=0,p.left=(j-m/(n/k))/2+"px")}},resImg=function(){var a=document.getElementsByTagName("img");if(0!==a.length)for(var b=function(a,b){return a.hasAttribute(b)},c=window.devicePixelRatio?window.devicePixelRatio:1,d=0;d<a.length;d++){var e=a[d],f=c*e.parentNode.offsetWidth,g="data-src",h=c&&b(e,"data-src-base2x")?"data-src-base2x":"data-src-base";if(b(e,g)){for(var i=b(e,h)?e.getAttribute(h):"",j=e.getAttribute(g),k=j.split(","),l=0;l<k.length;l++){var p,q,m=k[l].replace(":","||").split("||"),n=m[0],o=m[1];if(-1!==n.indexOf("<"))if(p=n.split("<"),k[l-1]){var r=k[l-1].split(/:(.+)/),s=r[0].split("<");q=f<=p[1]&&f>s[1]}else q=f<=p[1];else if(p=n.split(">"),k[l+1]){var t=k[l+1].split(/:(.+)/),u=t[0].split(">");q=f>=p[1]&&f<u[1]}else q=f>=p[1];if(q){var w,v=-1!==o.indexOf("//")?1:0;w=1===v?o:i+o,e.src!==w&&e.setAttribute("src",w);break}}e.addEventListener("load",helperize)}}},colymn=function(){function m(a){return RegExp(a+"-(col|center)-","g")}function n(a){return RegExp(a+"-center-\\d+(px|em)","g")}function o(a,b){return RegExp(a+"-"+b+"-\\d+-\\d+","g")}function p(a){return a.test(w[x].className)}function q(a){return w[x].className.match(a).toString().match(/(\d+|px|em)/g)}function r(a){var b=q(a),c=b[0]/b[1]*(100+e-e*b[1])+e*b[0]-e,d=parseFloat(w[x].parentNode.style.width),f=100/d*-(c+e)+"%";return f}function s(a){var b=q(a),c=100*b[0]/b[1]-(b[1]-b[0])*e/b[1]+"%";return c}function t(a){for(;"svg"!==a.nodeName&&(a=a.parentNode)&&"svg"!==a.nodeName;);return!!a}for(var a=window.innerWidth,b=window.innerHeight,c=document.querySelectorAll("*"),d=document.querySelectorAll(".colymn-clearfix"),e=4,f=300,g=300,h=440,i=640,j=1024,k=1440,l=0;l<d.length;l++)d[l].parentNode.removeChild(d[l]);for(var u=0,v=0;v<c.length;v++)if(!t(c[v]))for(var w=c[v].children,x=0;x<w.length;++x){var y=w[x].style,z="xx";a>f&&b>a&&p(m("pp"))&&(z="pp"),a>g&&a>b&&p(m("pl"))&&(z="pl"),a>h&&b>a&&p(m("tp"))&&(z="tp"),a>i&&a>b&&p(m("tl"))&&(z="tl"),a>j&&p(m("dt"))&&(z="dt"),a>=k&&p(m("hd"))&&(z="hd");var A=o(z,"left"),B=o(z,"right"),C=o(z,"(col|offset)"),D=o(z,"(left|right)"),E=o(z,"center"),F=o(z,"col"),G=m("\\w+"),H=n(z);if(p(G)&&(y.position="relative",y.display="block",y.marginRight=0,y.marginLeft=0,y["float"]="none",y.width="100%"),p(H)){var I=q(H);y.display="block",y.marginRight="auto",y.marginLeft="auto",y["float"]="none",y.width=I[0]+I[1]}if(p(E)&&(y.width=s(E),y["float"]="none",y.marginRight="auto",y.marginLeft="auto"),p(F)){if(y.width=s(F),y["float"]="left",y.marginLeft=e+"%","0"===q(F)[0]&&(y.display="none"),!p(D)){var J=q(C);if(J[2]||(J[2]=0,J[3]=1),.01>=u&&(y.marginLeft=0),J[2]){var K=J[2]/J[3]*(100+e-e*J[3])+e*J[2];y.marginLeft=K+e+"%",.01>=u&&(y.marginLeft=K+"%")}if(u+=J[0]/J[1]+J[2]/J[3],u>=.99){u-=1;var L=document.createElement("div");L.style.clear="both",L.className="colymn-clearfix",w[x].parentNode.insertBefore(L,w[x].nextSibling)}}p(A)&&(y.marginRight=e+"%",y.marginLeft=r(A)),p(B)&&(y["float"]="right",y.marginLeft=e+"%",y.marginRight=r(B))}}helperize(),resImg()},a(function(){colymn()})}();
